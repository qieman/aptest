(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{692:function(e,t,r){},693:function(e,t,r){"use strict";var o=r(692);r.n(o).a},697:function(e,t,r){"use strict";r.r(t);r(73),r(74),r(40),r(447);var o=r(82),n=r(83),c=r(227),l=r(228),f=r(180),m=r(51),d=r(181);function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e,t,r,desc){var o,n=arguments.length,c=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(n<3?o(c):n>3?o(t,r,c):o(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},y=function(e){Object(c.a)(m,e);var t,r=(t=m,function(){var e,r=Object(f.a)(t);if(h()){var o=Object(f.a)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Object(l.a)(this,e)});function m(){var e;return Object(o.a)(this,m),(e=r.apply(this,arguments)).form={username:"lushengdage@163.com",password:""},e.rules={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},e}return Object(n.a)(m,[{key:"onSubmit",value:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&(e.$cookie.Set("token",e.form.username+":"+e.form.password,{expires:7,path:"/"}),e.$http.Get(e.$api.login,{},(function(){e.$cookie.Set("token","")})).then((function(t){e.$cookie.Set("token",t.token+":",{expires:Math.floor(t.expiration/86400),path:"/"}),e.$cookie.Set("u_i",t.user.username+":"+t.user.email+":"+t.user.role_id,{expires:Math.floor(t.expiration/86400),path:"/"}),e.$message.success("登录成功"),e.$router.push("/")})))}))}}]),m}(d.c),w=y=v([Object(d.a)({layout:"login"})],y),k=(r(693),r(59)),component=Object(k.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.form,rules:e.rules}},[r("h1",[e._v("\n    AutoPublisher\n    "),r("small",[e._v("用户登录")])]),e._v(" "),r("a-form-model-item",{attrs:{label:"",prop:"username"}},[r("a-input",{attrs:{placeholder:"输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),r("a-form-model-item",{attrs:{label:"",prop:"password"}},[r("a-input",{attrs:{placeholder:"输入密码",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),r("a-form-model-item",[r("a-button",{staticClass:"submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登录")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);